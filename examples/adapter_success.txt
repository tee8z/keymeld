just quickstart-adaptors
ğŸš€ Starting KeyMeld adaptor signatures quickstart...
ğŸš€ KeyMeld Development Environment (Rust 1.88.0)
Use 'just help' to see available commands
âœ… VSock available for enclave simulation
ğŸ§¹ Cleaning all data...
ğŸ›‘ Stopping VSock proxy services...
âœ… All VSock proxy services stopped
âœ… Clean complete
ğŸš€ Starting VSock proxy services...
Loading VSock kernel modules...
âœ… VSock device available - starting VSock proxies
Starting VSock proxy for enclave 0 (CID:2, VSock:5000 â†’ TCP:9000)
Starting VSock proxy for enclave 1 (CID:2, VSock:5001 â†’ TCP:9001)
Starting VSock proxy for enclave 2 (CID:2, VSock:5002 â†’ TCP:9002)
âœ… VSock proxy services started
   Enclave 0: localhost:9000 â†’ VSock CID:2 port:5000
   Enclave 1: localhost:9001 â†’ VSock CID:2 port:5001
   Enclave 2: localhost:9002 â†’ VSock CID:2 port:5002
ğŸ¦ Setting up Bitcoin regtest environment...
Starting Bitcoin Core...
Bitcoin Core starting
Waiting for Bitcoin Core to start...
Bitcoin Core RPC ready
Generating initial blocks...
âœ… Bitcoin regtest ready with funded coordinator wallet
    Finished `dev` profile [unoptimized + debuginfo] target(s) in 0.37s
ğŸš€ Starting KeyMeld services...
âœ… Services started! Logs available in logs/ directory
ğŸŒ Gateway: http://localhost:8080
ğŸ® Running KeyMeld adaptor demo...
    Finished `dev` profile [unoptimized + debuginfo] target(s) in 0.43s
     Running `target/debug/keymeld_demo adaptor --config config/example-nix.yaml --amount 50000 --destination bcrt1qf0p0zqynlcq7c4j6vm53qaxapm3chufwfgge80`
2025-12-30T06:07:56.652961Z  INFO keymeld_demo::keymeld_adaptor: Loaded configuration for adaptor signatures test
2025-12-30T06:07:56.653015Z  INFO keymeld_examples: ğŸ”§ Initializing KeyMeld E2E Test
2025-12-30T06:07:56.653027Z  INFO keymeld_examples: Network: regtest
2025-12-30T06:07:56.653046Z  INFO keymeld_examples: Participants: 2
2025-12-30T06:07:56.653061Z  INFO keymeld_examples: Amount: 50000 sats
2025-12-30T06:07:56.671103Z  INFO keymeld_examples: ğŸ“ Loading existing coordinator private key from /tmp/keymeld-keys/coordinator.key
2025-12-30T06:07:56.671308Z  INFO keymeld_examples: ğŸ‘¤ Coordinator user ID: 019b6dde-ccff-70f2-a5cc-909b0a5651a4
2025-12-30T06:07:56.739788Z  INFO keymeld_demo::keymeld_adaptor: ğŸ”§ KeyMeld Adaptor Signatures E2E Test
2025-12-30T06:07:56.739856Z  INFO keymeld_demo::keymeld_adaptor: =======================================
2025-12-30T06:07:56.739869Z  INFO keymeld_demo::keymeld_adaptor: Network: regtest
2025-12-30T06:07:56.739884Z  INFO keymeld_demo::keymeld_adaptor: Gateway: http://127.0.0.1:8080
2025-12-30T06:07:56.739896Z  INFO keymeld_demo::keymeld_adaptor: Participants: 2
2025-12-30T06:07:56.739904Z  INFO keymeld_demo::keymeld_adaptor: Test Configuration:
2025-12-30T06:07:56.739915Z  INFO keymeld_demo::keymeld_adaptor:   - Single adaptor: true
2025-12-30T06:07:56.739925Z  INFO keymeld_demo::keymeld_adaptor:   - And adaptor: true
2025-12-30T06:07:56.739935Z  INFO keymeld_demo::keymeld_adaptor:   - Or adaptor: true
2025-12-30T06:07:56.739945Z  INFO keymeld_demo::keymeld_adaptor:   - Skip regular signing: false
2025-12-30T06:07:56.739957Z  INFO keymeld_examples: ğŸ‘¥ Loading participant keys...
2025-12-30T06:07:56.739993Z  INFO keymeld_examples: ğŸ“ Loading participant 1 key from /tmp/keymeld-keys/participant_1.key
2025-12-30T06:07:56.807947Z  INFO keymeld_examples: âœ… Loaded 1 participants
2025-12-30T06:07:56.808024Z  INFO keymeld_examples: ğŸ’° Funding coordinator from master wallet...
2025-12-30T06:07:56.809166Z  INFO keymeld_examples: ğŸ“ Coordinator address: bcrt1pvckg4d2afacutvr0r82nnztyfeyjt5wv4jqwyq9594tjs57dkuls327fu5
2025-12-30T06:07:56.809252Z  INFO keymeld_examples: ğŸ’¸ Sending 110000 sats to coordinator
2025-12-30T06:07:56.844039Z  INFO keymeld_examples: ğŸ“¡ Funding transaction: 9395ad0ece821eb39f3ae690ab2b8d338ec786d4e79d051b674e193e220b8ef8
2025-12-30T06:07:57.849561Z  INFO keymeld_examples: âœ… Funding confirmed with 1 confirmations
2025-12-30T06:07:57.849633Z  INFO keymeld_demo::keymeld_adaptor: ğŸ”‘ Starting Phase 1: Keygen Session
2025-12-30T06:07:57.849680Z  INFO keymeld_examples: ğŸ”‘ Creating keygen session...
2025-12-30T06:07:57.866445Z  INFO keymeld_examples: âœ… Keygen session 019b6dde-d199-7460-b2dc-69f65d4c18b4 created on coordinator enclave 1
2025-12-30T06:07:57.866545Z  INFO keymeld_examples: ğŸ“ Registering keygen participants...
2025-12-30T06:07:57.866573Z  INFO keymeld_examples: ğŸ¥ Waiting for all enclaves to be healthy...
2025-12-30T06:07:57.873175Z  INFO keymeld_examples: ğŸ¥ Health check: 3/3 enclaves healthy
2025-12-30T06:07:57.873243Z  INFO keymeld_examples: âœ… All 3 enclaves are healthy, proceeding with registration
2025-12-30T06:07:57.876228Z  INFO keymeld_examples: Found 2 available slots for keygen session
2025-12-30T06:07:57.876310Z  INFO keymeld_examples: ğŸ‘¤ Registering coordinator...
2025-12-30T06:07:57.876445Z  INFO keymeld_examples: ğŸ” Session secret shared out-of-band with participants
2025-12-30T06:07:57.876464Z  INFO keymeld_examples: ğŸ”— Secret: 7712fdf5
2025-12-30T06:07:57.886882Z  INFO keymeld_examples: âœ… Coordinator registered successfully
2025-12-30T06:07:57.898655Z  INFO keymeld_examples: âœ… Participant 019b6dde-cd87-7e92-9194-5cab1a478549 registered
2025-12-30T06:07:57.904228Z  INFO keymeld_examples: âœ… All 2 participants registered
2025-12-30T06:07:57.904306Z  INFO keymeld_examples: Successfully registered all participants
2025-12-30T06:07:57.904336Z  INFO keymeld_examples: â³ Waiting for keygen completion...
2025-12-30T06:07:57.911284Z  INFO keymeld_examples: Keygen still collecting participants...
2025-12-30T06:07:59.918800Z  INFO keymeld_demo::keymeld_adaptor: âœ… Keygen complete: 0291e9b2fdb1b1964e23aa345ad4efdf614748a334621ee324ca754e008d9b4bdf
2025-12-30T06:07:59.918897Z  INFO keymeld_examples: ğŸ’° Funding aggregate key address...
2025-12-30T06:07:59.919146Z  INFO keymeld_examples: ğŸ“ Aggregate key address: bcrt1pj85m9ld3kxtyuga2x3ddfm7lv9r53ge5vg0wxfx2w48qprvmf00sm9cyxz
2025-12-30T06:07:59.947468Z  INFO keymeld_examples: ğŸ“¡ Funding transaction: d33bfe3e67a86dc534f0dd561f82f6691296d11d8afb0bed6e47da7dacfd5d1a
2025-12-30T06:08:00.951920Z  INFO keymeld_examples: âœ… Aggregate funding confirmed
2025-12-30T06:08:00.953108Z  INFO keymeld_examples: âœ… Found aggregate key output at index 1
2025-12-30T06:08:00.953134Z  INFO keymeld_examples: ğŸ“ Creating MuSig2 transaction...
2025-12-30T06:08:00.953205Z  INFO keymeld_examples: ğŸ” Key details for transaction:
2025-12-30T06:08:00.953216Z  INFO keymeld_examples:   - Original aggregate key: 0291e9b2fdb1b1964e23aa345ad4efdf614748a334621ee324ca754e008d9b4bdf
2025-12-30T06:08:00.953233Z  INFO keymeld_examples:   - Aggregate key (compressed): 0291e9b2fdb1b1964e23aa345ad4efdf614748a334621ee324ca754e008d9b4bdf
2025-12-30T06:08:00.953249Z  INFO keymeld_examples:   - Aggregate key (x-only): 91e9b2fdb1b1964e23aa345ad4efdf614748a334621ee324ca754e008d9b4bdf
2025-12-30T06:08:00.953261Z  INFO keymeld_examples:   - Parity: Even
2025-12-30T06:08:00.954484Z  INFO keymeld_examples: âœ… UTXO scriptPubKey verification passed - matches current aggregate key
2025-12-30T06:08:00.954522Z  INFO keymeld_examples: âœ… Transaction created with 1 inputs and 2 outputs
2025-12-30T06:08:00.954536Z  INFO keymeld_demo::keymeld_adaptor: ğŸ”§ Starting Adaptor Signatures Test
2025-12-30T06:08:00.954548Z  INFO keymeld_examples::adaptor_utils: ğŸ”‘ Generating secret for single adaptor signature
2025-12-30T06:08:00.954954Z  INFO keymeld_examples::adaptor_utils: ğŸ”‘ Generating secrets for AND adaptor signature
2025-12-30T06:08:00.955677Z  INFO keymeld_examples::adaptor_utils: ğŸ”‘ Generating secrets for OR adaptor signature
2025-12-30T06:08:00.956426Z  INFO keymeld_demo::keymeld_adaptor: ğŸ“ Created 3 adaptor configurations with 5 secrets
2025-12-30T06:08:00.956440Z  INFO keymeld_demo::keymeld_adaptor:   Config 1: Single with 1 points
2025-12-30T06:08:00.956449Z  INFO keymeld_demo::keymeld_adaptor:   Config 2: And with 2 points
2025-12-30T06:08:00.956458Z  INFO keymeld_demo::keymeld_adaptor:   Config 3: Or with 2 points
2025-12-30T06:08:00.956467Z  INFO keymeld_demo::keymeld_adaptor: âœï¸ Starting Phase 2: Signing Session with Adaptor Signatures
2025-12-30T06:08:00.956536Z  INFO keymeld_examples:   - Input 0 value: 55000 sats
2025-12-30T06:08:00.956550Z  INFO keymeld_examples:   - Input 0 scriptPubKey: 512091e9b2fdb1b1964e23aa345ad4efdf614748a334621ee324ca754e008d9b4bdf
2025-12-30T06:08:00.956644Z  INFO keymeld_demo::keymeld_adaptor: ğŸ”’ Encrypting 3 adaptor configurations on client side
2025-12-30T06:08:00.957438Z  INFO keymeld_demo::keymeld_adaptor: âœ… Verified zero-knowledge privacy: gateway cannot see adaptor IDs or business logic
2025-12-30T06:08:00.967405Z  INFO keymeld_demo::keymeld_adaptor: âœ… Signing session 019b6dde-ddbc-7c83-baec-1c2ad32e4f15 created with adaptor configurations
2025-12-30T06:08:00.967522Z  INFO keymeld_examples: ğŸ“ Starting approval process for signing session 019b6dde-ddbc-7c83-baec-1c2ad32e4f15 and user: 019b6dde-ccff-70f2-a5cc-909b0a5651a4
2025-12-30T06:08:00.970265Z  INFO keymeld_examples: â³ Signing session 019b6dde-ddbc-7c83-baec-1c2ad32e4f15 not ready for approval - session initialization still in progress (attempt 1/10), retrying in 500ms
2025-12-30T06:08:01.477492Z  INFO keymeld_examples: âœ… Signing session 019b6dde-ddbc-7c83-baec-1c2ad32e4f15 successfully approved for user: 019b6dde-ccff-70f2-a5cc-909b0a5651a4
2025-12-30T06:08:01.477580Z  INFO keymeld_examples: ğŸ“ Starting approval process for signing session 019b6dde-ddbc-7c83-baec-1c2ad32e4f15 and user: 019b6dde-cd87-7e92-9194-5cab1a478549
2025-12-30T06:08:01.485523Z  INFO keymeld_examples: âœ… Signing session 019b6dde-ddbc-7c83-baec-1c2ad32e4f15 successfully approved for user: 019b6dde-cd87-7e92-9194-5cab1a478549
2025-12-30T06:08:01.485606Z  INFO keymeld_demo::keymeld_adaptor: âœ… All required approvals completed - signing can now proceed
2025-12-30T06:08:01.485634Z  INFO keymeld_demo::keymeld_adaptor: â³ Waiting for signing completion with adaptor processing...
2025-12-30T06:08:01.490077Z  INFO keymeld_demo::keymeld_adaptor: Signing still collecting participants...
2025-12-30T06:08:03.498698Z  INFO keymeld_demo::keymeld_adaptor: Generating partial signatures...
2025-12-30T06:08:05.510262Z  INFO keymeld_demo::keymeld_adaptor: ğŸ”“ Decrypting adaptor signatures on client side
2025-12-30T06:08:05.514790Z  INFO keymeld_demo::keymeld_adaptor: âœ… Regular MuSig2 signing completed
2025-12-30T06:08:05.514822Z  INFO keymeld_demo::keymeld_adaptor: ğŸ‰ Adaptor signatures processed automatically!
2025-12-30T06:08:05.514842Z  INFO keymeld_demo::keymeld_adaptor: ğŸ”“ Successfully decrypted 3 adaptor signatures
2025-12-30T06:08:05.514868Z  INFO keymeld_examples::adaptor_utils: Validating adaptor signatures...
2025-12-30T06:08:05.514935Z  INFO keymeld_examples::adaptor_utils: âœ… Single adaptor signature validated: ID=019b6dde-ddba-7ea3-bb58-5587e2ff2801
2025-12-30T06:08:05.514977Z  INFO keymeld_examples::adaptor_utils: âœ… And adaptor signature validated: ID=019b6dde-ddbb-71d0-926f-e56cb0036db6
2025-12-30T06:08:05.515016Z  INFO keymeld_examples::adaptor_utils: âœ… Or adaptor signature validated: ID=019b6dde-ddbc-7c83-baec-1c1482173ffc
2025-12-30T06:08:05.515032Z  INFO keymeld_examples::adaptor_utils: âœ… All adaptor signatures validated successfully
2025-12-30T06:08:05.515051Z  INFO keymeld_demo::keymeld_adaptor: ğŸ­ Demonstrating complete adaptor signature flow...
2025-12-30T06:08:05.515065Z  INFO keymeld_demo::keymeld_adaptor: ğŸ”‘ Step 1: Revealing adaptor secrets (in real scenarios, this happens through external events)
2025-12-30T06:08:05.515210Z  INFO keymeld_examples:   - Input 0 value: 55000 sats
2025-12-30T06:08:05.515228Z  INFO keymeld_examples:   - Input 0 scriptPubKey: 512091e9b2fdb1b1964e23aa345ad4efdf614748a334621ee324ca754e008d9b4bdf
2025-12-30T06:08:05.515306Z  INFO keymeld_demo::keymeld_adaptor: ğŸ”‘ Step 2: Adapting signatures using revealed secrets...
2025-12-30T06:08:05.515319Z  INFO keymeld_examples::adaptor_utils: ğŸ”“ Adapting adaptor signatures with revealed secrets...
2025-12-30T06:08:05.515331Z  INFO keymeld_examples::adaptor_utils: ğŸ”“ Adapting Single signature for config 019b6dde-ddba-7ea3-bb58-5587e2ff2801
2025-12-30T06:08:05.515393Z  INFO keymeld_examples::adaptor_utils: ğŸ”“ Applying secret to adapt signature...
2025-12-30T06:08:05.516016Z  INFO keymeld_examples::adaptor_utils: ğŸ” Verifying adapted signature...
2025-12-30T06:08:05.516629Z  INFO keymeld_examples::adaptor_utils: âœ… Single signature adapted and verified successfully!
2025-12-30T06:08:05.516643Z  INFO keymeld_demo::keymeld_adaptor: ğŸ”‘ Step 3: Broadcasting transaction with adapted signature...
2025-12-30T06:08:05.516655Z  INFO keymeld_examples: ğŸ“ Applying signature to transaction...
2025-12-30T06:08:05.516717Z  INFO keymeld_examples: ğŸ” Transaction being broadcast:
2025-12-30T06:08:05.516744Z  INFO keymeld_examples:   - Transaction ID: 98759a690c53b4fdef677b59501c148bb1ac3baad4223ef0ac26cc2af3241068
2025-12-30T06:08:05.516768Z  INFO keymeld_examples: âœ… Transaction signed successfully
2025-12-30T06:08:05.518218Z  INFO keymeld_examples: ğŸ“¡ Transaction broadcast successfully: 98759a690c53b4fdef677b59501c148bb1ac3baad4223ef0ac26cc2af3241068
2025-12-30T06:08:05.518300Z  INFO keymeld_demo::keymeld_adaptor: âœ… Transaction broadcast with adapted signature: 98759a690c53b4fdef677b59501c148bb1ac3baad4223ef0ac26cc2af3241068

ğŸ‰ All Adaptor Signature Tests Completed Successfully!
===============================================
âœ… Aggregate key: 0291e9b2fdb1b1964e23aa345ad4efdf614748a334621ee324ca754e008d9b4bdf
ğŸ“‹ Adaptor Signature 1 Details:
   Type: Single
   ID: 019b6dde-ddba-7ea3-bb58-5587e2ff2801
   Points: 1 adaptor points
   Signature scalar: 02b1a845af22a00f...
   Nonce point: 023a415c1644f2c0...
   Aggregate adaptor point: 0350106e3531db46...

ğŸ“‹ Adaptor Signature 2 Details:
   Type: And
   ID: 019b6dde-ddbb-71d0-926f-e56cb0036db6
   Points: 2 adaptor points
   Signature scalar: 02bf9f9dacdd5926...
   Nonce point: 03c795f63eef4811...
   Aggregate adaptor point: 02d7f45183df9f19...

ğŸ“‹ Adaptor Signature 3 Details:
   Type: Or
   ID: 019b6dde-ddbc-7c83-baec-1c1482173ffc
   Points: 2 adaptor points
   Hints: 2 hints provided
   Signature scalar: 0300be46f0ba88b8...
   Nonce point: 0282fc15b050e80b...
   Aggregate adaptor point: 0341badc6b9514b7...


âœ… KeyMeld adaptor signatures test completed successfully!
