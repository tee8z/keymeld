just quickstart
ğŸš€ Starting KeyMeld quickstart...
warning: Git tree '/home/teebz/repos/keymeld' is dirty
ğŸš€ KeyMeld Development Environment (Rust 1.88.0)
Use 'just help' to see available commands
âœ… VSock available for enclave simulation
ğŸ§¹ Cleaning all data...
ğŸ›‘ Stopping VSock proxy services...
âœ… All VSock proxy services stopped
âœ… Clean complete
ğŸš€ Starting VSock proxy services...
Loading VSock kernel modules...
âœ… VSock device available - starting VSock proxies
Starting VSock proxy for enclave 0 (CID:2, VSock:5000 â†’ TCP:9000)
Starting VSock proxy for enclave 1 (CID:2, VSock:5001 â†’ TCP:9001)
Starting VSock proxy for enclave 2 (CID:2, VSock:5002 â†’ TCP:9002)
âœ… VSock proxy services started
   Enclave 0: localhost:9000 â†’ VSock CID:2 port:5000
   Enclave 1: localhost:9001 â†’ VSock CID:2 port:5001
   Enclave 2: localhost:9002 â†’ VSock CID:2 port:5002
ğŸ¦ Setting up Bitcoin regtest environment...
Starting Bitcoin Core...
Bitcoin Core starting
Waiting for Bitcoin Core to start...
Bitcoin Core RPC ready
Generating initial blocks...
âœ… Bitcoin regtest ready with funded coordinator wallet
    Finished `dev` profile [unoptimized + debuginfo] target(s) in 0.28s
ğŸš€ Starting KeyMeld services...
âœ… Services started! Logs available in logs/ directory
ğŸŒ Gateway: http://localhost:8080
ğŸ® Running KeyMeld plain demo...
    Finished `dev` profile [unoptimized + debuginfo] target(s) in 0.27s
     Running `target/debug/keymeld_demo plain --config config/example-nix.yaml --amount 50000 --destination bcrt1qf0p0zqynlcq7c4j6vm53qaxapm3chufwfgge80`
2025-12-30T06:09:01.607355Z  INFO keymeld_demo::keymeld_plain: Loaded configuration from config/example-nix.yaml
2025-12-30T06:09:01.607415Z  INFO keymeld_examples: ğŸ”§ Initializing KeyMeld E2E Test
2025-12-30T06:09:01.607432Z  INFO keymeld_examples: Network: regtest
2025-12-30T06:09:01.607451Z  INFO keymeld_examples: Participants: 2
2025-12-30T06:09:01.607463Z  INFO keymeld_examples: Amount: 50000 sats
2025-12-30T06:09:01.623694Z  INFO keymeld_examples: ğŸ“ Loading existing coordinator private key from /tmp/keymeld-keys/coordinator.key
2025-12-30T06:09:01.623888Z  INFO keymeld_examples: ğŸ‘¤ Coordinator user ID: 019b6ddf-cab7-7cf3-b3c6-9b3b66c5e539
2025-12-30T06:09:01.691161Z  INFO keymeld_demo::keymeld_plain: ğŸ§ª KeyMeld End-to-End Test - Two-Phase Flow
2025-12-30T06:09:01.691194Z  INFO keymeld_demo::keymeld_plain: ============================================
2025-12-30T06:09:01.691201Z  INFO keymeld_demo::keymeld_plain: Network: regtest
2025-12-30T06:09:01.691209Z  INFO keymeld_demo::keymeld_plain: Gateway: http://127.0.0.1:8080
2025-12-30T06:09:01.691216Z  INFO keymeld_demo::keymeld_plain: Participants: 2
2025-12-30T06:09:01.691226Z  INFO keymeld_examples: ğŸ‘¥ Loading participant keys...
2025-12-30T06:09:01.691256Z  INFO keymeld_examples: ğŸ“ Loading participant 1 key from /tmp/keymeld-keys/participant_1.key
2025-12-30T06:09:01.756411Z  INFO keymeld_examples: âœ… Loaded 1 participants
2025-12-30T06:09:01.756457Z  INFO keymeld_examples: ğŸ’° Funding coordinator from master wallet...
2025-12-30T06:09:01.757586Z  INFO keymeld_examples: ğŸ“ Coordinator address: bcrt1pvckg4d2afacutvr0r82nnztyfeyjt5wv4jqwyq9594tjs57dkuls327fu5
2025-12-30T06:09:01.757692Z  INFO keymeld_examples: ğŸ’¸ Sending 110000 sats to coordinator
2025-12-30T06:09:01.784229Z  INFO keymeld_examples: ğŸ“¡ Funding transaction: 41e54388894d6d5c30588e26efe13802ce3ac87cc4fe3589feaa1b3c18cee8cd
2025-12-30T06:09:02.789797Z  INFO keymeld_examples: âœ… Funding confirmed with 1 confirmations
2025-12-30T06:09:02.789858Z  INFO keymeld_demo::keymeld_plain: ğŸ”‘ Starting Phase 1: Keygen Session
2025-12-30T06:09:02.789885Z  INFO keymeld_examples: ğŸ”‘ Creating keygen session...
2025-12-30T06:09:02.802987Z  INFO keymeld_examples: âœ… Keygen session 019b6ddf-cf45-7b91-a32e-5643343f00e6 created on coordinator enclave 1
2025-12-30T06:09:02.803079Z  INFO keymeld_demo::keymeld_plain: ğŸ“‹ Approval Configuration:
2025-12-30T06:09:02.803112Z  INFO keymeld_demo::keymeld_plain:    - Coordinator requires signing approval: YES
2025-12-30T06:09:02.803143Z  INFO keymeld_demo::keymeld_plain:    - Participant 0 requires signing approval: YES
2025-12-30T06:09:02.803178Z  INFO keymeld_examples: ğŸ“ Registering keygen participants...
2025-12-30T06:09:02.803210Z  INFO keymeld_examples: ğŸ¥ Waiting for all enclaves to be healthy...
2025-12-30T06:09:02.809267Z  INFO keymeld_examples: ğŸ¥ Health check: 3/3 enclaves healthy
2025-12-30T06:09:02.809304Z  INFO keymeld_examples: âœ… All 3 enclaves are healthy, proceeding with registration
2025-12-30T06:09:02.811951Z  INFO keymeld_examples: Found 2 available slots for keygen session
2025-12-30T06:09:02.811996Z  INFO keymeld_examples: ğŸ‘¤ Registering coordinator...
2025-12-30T06:09:02.812060Z  INFO keymeld_examples: ğŸ” Session secret shared out-of-band with participants
2025-12-30T06:09:02.812069Z  INFO keymeld_examples: ğŸ”— Secret: a9d20984
2025-12-30T06:09:02.820502Z  INFO keymeld_examples: âœ… Coordinator registered successfully
2025-12-30T06:09:02.830733Z  INFO keymeld_examples: âœ… Participant 019b6ddf-cb3c-7532-9ee0-8f0e7725d642 registered
2025-12-30T06:09:02.835601Z  INFO keymeld_examples: âœ… All 2 participants registered
2025-12-30T06:09:02.835654Z  INFO keymeld_examples: Successfully registered all participants
2025-12-30T06:09:02.835679Z  INFO keymeld_examples: â³ Waiting for keygen completion...
2025-12-30T06:09:02.840252Z  INFO keymeld_examples: Keygen still collecting participants...
2025-12-30T06:09:04.848506Z  INFO keymeld_demo::keymeld_plain: âœ… Keygen complete: 0291e9b2fdb1b1964e23aa345ad4efdf614748a334621ee324ca754e008d9b4bdf
2025-12-30T06:09:04.848573Z  INFO keymeld_examples: ğŸ’° Funding aggregate key address...
2025-12-30T06:09:04.848679Z  INFO keymeld_examples: ğŸ“ Aggregate key address: bcrt1pj85m9ld3kxtyuga2x3ddfm7lv9r53ge5vg0wxfx2w48qprvmf00sm9cyxz
2025-12-30T06:09:04.877285Z  INFO keymeld_examples: ğŸ“¡ Funding transaction: b98e5d90194140134bd4d8f35f01aa98758f1cd5acd275e383ef1fcd1876008a
2025-12-30T06:09:05.882054Z  INFO keymeld_examples: âœ… Aggregate funding confirmed
2025-12-30T06:09:05.883286Z  INFO keymeld_examples: âœ… Found aggregate key output at index 1
2025-12-30T06:09:05.883317Z  INFO keymeld_examples: ğŸ“ Creating MuSig2 transaction...
2025-12-30T06:09:05.883425Z  INFO keymeld_examples: ğŸ” Key details for transaction:
2025-12-30T06:09:05.883436Z  INFO keymeld_examples:   - Original aggregate key: 0291e9b2fdb1b1964e23aa345ad4efdf614748a334621ee324ca754e008d9b4bdf
2025-12-30T06:09:05.883455Z  INFO keymeld_examples:   - Aggregate key (compressed): 0291e9b2fdb1b1964e23aa345ad4efdf614748a334621ee324ca754e008d9b4bdf
2025-12-30T06:09:05.883475Z  INFO keymeld_examples:   - Aggregate key (x-only): 91e9b2fdb1b1964e23aa345ad4efdf614748a334621ee324ca754e008d9b4bdf
2025-12-30T06:09:05.883489Z  INFO keymeld_examples:   - Parity: Even
2025-12-30T06:09:05.884477Z  INFO keymeld_examples: âœ… UTXO scriptPubKey verification passed - matches current aggregate key
2025-12-30T06:09:05.884506Z  INFO keymeld_examples: âœ… Transaction created with 1 inputs and 2 outputs
2025-12-30T06:09:05.884517Z  INFO keymeld_demo::keymeld_plain: âœï¸ Starting Phase 2: Signing Session
2025-12-30T06:09:05.884586Z  INFO keymeld_examples:   - Input 0 value: 55000 sats
2025-12-30T06:09:05.884597Z  INFO keymeld_examples:   - Input 0 scriptPubKey: 512091e9b2fdb1b1964e23aa345ad4efdf614748a334621ee324ca754e008d9b4bdf
2025-12-30T06:09:05.897365Z  INFO keymeld_examples: âœ… Signing session 019b6ddf-db5c-7f81-909b-bccea8a2ea64 created
2025-12-30T06:09:05.897470Z  INFO keymeld_demo::keymeld_plain: ğŸ“‹ Starting Phase 2a: Signing Approvals
2025-12-30T06:09:05.897491Z  INFO keymeld_demo::keymeld_plain: âš ï¸  Participants requiring approval before signing can proceed:
2025-12-30T06:09:05.897513Z  INFO keymeld_demo::keymeld_plain:    - Coordinator: 019b6ddf-cab7-7cf3-b3c6-9b3b66c5e539 (requires approval: YES)
2025-12-30T06:09:05.897539Z  INFO keymeld_demo::keymeld_plain:    - Participant 0: 019b6ddf-cb3c-7532-9ee0-8f0e7725d642 (requires approval: YES)
2025-12-30T06:09:05.897561Z  INFO keymeld_demo::keymeld_plain: â„¹ï¸  Note: Approval requests may retry if signing session initialization is still in progress
2025-12-30T06:09:05.897585Z  INFO keymeld_examples: ğŸ“ Starting approval process for signing session 019b6ddf-db5c-7f81-909b-bccea8a2ea64 and user: 019b6ddf-cab7-7cf3-b3c6-9b3b66c5e539
2025-12-30T06:09:05.901138Z  INFO keymeld_examples: â³ Signing session 019b6ddf-db5c-7f81-909b-bccea8a2ea64 not ready for approval - session initialization still in progress (attempt 1/10), retrying in 500ms
2025-12-30T06:09:06.410078Z  INFO keymeld_examples: âœ… Signing session 019b6ddf-db5c-7f81-909b-bccea8a2ea64 successfully approved for user: 019b6ddf-cab7-7cf3-b3c6-9b3b66c5e539
2025-12-30T06:09:06.410154Z  INFO keymeld_examples: ğŸ“ Starting approval process for signing session 019b6ddf-db5c-7f81-909b-bccea8a2ea64 and user: 019b6ddf-cb3c-7532-9ee0-8f0e7725d642
2025-12-30T06:09:06.416266Z  INFO keymeld_examples: âœ… Signing session 019b6ddf-db5c-7f81-909b-bccea8a2ea64 successfully approved for user: 019b6ddf-cb3c-7532-9ee0-8f0e7725d642
2025-12-30T06:09:06.416344Z  INFO keymeld_demo::keymeld_plain: âœ… All required approvals completed - signing can now proceed
2025-12-30T06:09:06.416363Z  INFO keymeld_examples: â³ Waiting for signing completion...
2025-12-30T06:09:06.423707Z  INFO keymeld_examples: Signing still collecting participants...
2025-12-30T06:09:08.430308Z  INFO keymeld_examples: Generating partial signatures...
2025-12-30T06:09:10.438035Z  INFO keymeld_examples: ğŸ“ Applying signature to transaction...
2025-12-30T06:09:10.438129Z  INFO keymeld_examples: ğŸ” Transaction being broadcast:
2025-12-30T06:09:10.438179Z  INFO keymeld_examples:   - Transaction ID: 7c9ae60b2082647b1240661040e2b9f0149932fdfcfb2c2285456366761085f7
2025-12-30T06:09:10.438213Z  INFO keymeld_examples: âœ… Transaction signed successfully
2025-12-30T06:09:10.439436Z  INFO keymeld_examples: ğŸ“¡ Transaction broadcast successfully: 7c9ae60b2082647b1240661040e2b9f0149932fdfcfb2c2285456366761085f7

ğŸ‰ Three-Phase KeyMeld Test Completed Successfully!
âœ… Phase 1: Keygen session completed
âœ… Phase 2a: Signing approvals completed (with signature authentication)
âœ… Phase 2b: Signing session completed (participants inherited from keygen)
âœ… Aggregate key: 0291e9b2fdb1b1964e23aa345ad4efdf614748a334621ee324ca754e008d9b4bdf
âœ… Transaction broadcast: 7c9ae60b2082647b1240661040e2b9f0149932fdfcfb2c2285456366761085f7
ğŸ“‹ Keygen Session ID: 019b6ddf-cf45-7b91-a32e-5643343f00e6
ğŸ“‹ Signing Session ID: 019b6ddf-db5c-7f81-909b-bccea8a2ea64

âœ… KeyMeld end-to-end test completed successfully!
